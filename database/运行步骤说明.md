# WebContentScraper 运行后检查清单

## 运行 WebContentScraper 后应该检查：

### 1. 检查生成的文件

运行 `java com.zht.util.WebContentScraper` 后，应该在 `database/` 目录下生成以下文件：

**SQL数据文件：**
- `home_data.sql` - 首页数据
- `about_data.sql` - 关于我们数据
- `laboratory_data.sql` - 实验室数据
- `honor_data.sql` - 荣誉资质数据
- `news_data.sql` - 新闻数据
- `contact_data.sql` - 联系我们数据

**图片列表文件：**
- `images_to_download.txt` - 图片下载URL列表

### 2. 如果没有生成文件，可能的原因：

1. **编译错误**：需要先编译项目
   ```bash
   cd backend
   mvn compile
   ```

2. **缺少依赖**：需要确保 Jsoup 库在 classpath 中
   ```bash
   # 使用 Maven 运行
   mvn exec:java -Dexec.mainClass="com.zht.util.WebContentScraper"
   ```

3. **网络问题**：无法访问参考网站
   - 检查网络连接
   - 检查防火墙设置

4. **路径问题**：检查输出目录是否存在
   - 确保 `D:/workspace/pan/database/` 目录存在

### 3. 如果文件已生成，继续下一步：

#### 步骤1：下载图片
```bash
java com.zht.util.ImageDownloader
```

这会：
- 自动执行 ImagePathFixer 修复图片路径
- 从 `images_to_download.txt` 读取图片URL
- 删除旧图片
- 下载所有新图片到 `D:/workspace/pan/uploads/`

#### 步骤2：初始化数据库
```bash
java com.zht.util.DatabaseInitializer
```

这会：
- 清除旧数据（保留admin用户）
- 执行所有SQL脚本文件
- 初始化数据库

### 4. 检查运行结果

**WebContentScraper 运行成功的标志：**
- 控制台输出 "========== 抓取完成 =========="
- 显示 "共发现 X 张图片"
- `database/` 目录下生成了 `*_data.sql` 文件
- `database/images_to_download.txt` 文件存在且包含图片URL

**如果运行失败：**
- 查看控制台错误信息
- 检查网络连接
- 确认参考网站可以访问
- 检查文件权限

### 5. 手动检查生成的文件内容

打开 `database/images_to_download.txt`，应该看到类似这样的内容：
```
http://www.zht-lab.cn/upload/xxx.jpg
http://www.ltt-lab.com.cn/images/xxx.png
...
```

打开 `database/home_data.sql`，应该看到SQL INSERT语句。

## 常见问题

**Q: 运行后没有任何输出？**
A: 可能是编译问题，尝试使用 Maven 运行：
```bash
cd backend
mvn exec:java -Dexec.mainClass="com.zht.util.WebContentScraper"
```

**Q: 提示找不到类？**
A: 需要先编译：
```bash
cd backend
mvn compile
```

**Q: 提示网络超时？**
A: 检查网络连接，或者增加超时时间（修改代码中的 timeout 值）

**Q: 生成了文件但内容为空？**
A: 可能是网页结构变化，需要调整 CSS 选择器

## 下一步

完成以上步骤后，告诉我：
1. WebContentScraper 是否成功运行？
2. 生成了哪些文件？
3. 是否有错误信息？

然后我会继续更新前端页面，匹配参考网站的设计。

